import{b as c,m as w,_ as a,a as k,j as e,L as F,A as M}from"./index-Dx2hv2Bi.js";import{u as Q,F as m,R as T,C as U,I as P}from"./index-BDw1ZPTA.js";import{u as E}from"./useQuery-C1S6pnhT.js";import{C as z}from"./index-BI6jVG9p.js";import{p as N}from"./index-BdMuK6WX.js";import{B as R,s as q}from"./index-CfUYSH4I.js";import"./collapse-BbEVqHco.js";import"./EllipsisOutlined-lljl6GdX.js";var A=["refetch","reobserve","fetchMore","updateQuery","startPolling","subscribeToMore"];function L(h,t){var i,r=c.useRef(),s=c.useRef(),p=c.useRef(),o=w(t,r.current||{}),x=(i=o==null?void 0:o.query)!==null&&i!==void 0?i:h;s.current=t,p.current=x;var u=E(Q(t&&t.client),x),v=u.useQuery(a(a({},o),{skip:!r.current})),y=v.observable.options.initialFetchPolicy||u.getDefaultFetchPolicy(),f=Object.assign(v,{called:!!r.current}),j=c.useMemo(function(){for(var l={},g=function(b){var S=f[b];l[b]=function(){return r.current||(r.current=Object.create(null),u.forceUpdateState()),S.apply(this,arguments)}},n=0,d=A;n<d.length;n++){var I=d[n];g(I)}return l},[]);Object.assign(f,j);var C=c.useCallback(function(l){r.current=l?a(a({},l),{fetchPolicy:l.fetchPolicy||y}):{fetchPolicy:y};var g=w(s.current,a({query:p.current},r.current)),n=u.executeQuery(a(a({},g),{skip:!1})).then(function(d){return Object.assign(d,j)});return n.catch(function(){}),n},[]);return[C,f]}const K=()=>{const[h]=m.useForm(),{loginUser:t}=k(),[i,r]=L(M,{onCompleted:({authenticateUser:s})=>{t(s),q.success({message:"Logged in Successfully."})},onError:s=>{q.error({message:s.message})}});return e.jsx("section",{className:"h-full w-full",children:e.jsx(T,{align:"middle",justify:"center",className:"h-full",children:e.jsx(U,{span:7,xs:24,sm:9,children:e.jsx(z,{className:"w-full shadow-md rounded-sm",cover:e.jsx("div",{className:"w-full px-8",children:e.jsxs("div",{className:"auth-bg py-4 rounded-sm mt-[-20px] flex flex-col items-center justify-center",children:[e.jsx(N.Title,{level:2,children:e.jsx("span",{className:"text-white",children:"Sign In"})}),e.jsx(N.Paragraph,{className:"text-white text-[18px]",children:"Sign in into your account."})]})}),children:e.jsxs(m,{form:h,layout:"vertical",requiredMark:!1,disabled:r.loading,onFinish:s=>i({variables:s}),children:[e.jsx(m.Item,{name:"username",label:"Username",rules:[{required:!0,message:"Username is required."}],children:e.jsx(P,{placeholder:"Username",size:"large"})}),e.jsx(m.Item,{name:"password",label:"Password",className:"my-10",rules:[{required:!0,message:"Password is required."},{min:8,message:"Password should atleast have 8 characters."}],children:e.jsx(P.Password,{size:"large",placeholder:"Password"})}),e.jsxs("div",{className:"w-full flex flex-col gap-4",children:[e.jsx(R,{block:!0,size:"large",type:"primary",htmlType:"submit",loading:r.loading,disabled:r.loading,children:"Sign In"}),e.jsx(F,{to:"/auth/register",children:e.jsx(R,{block:!0,size:"large",disabled:r.loading,className:"flex items-center justify-center",children:"Don't have account? Register Now"})})]})]})})})})})};export{K as default};
